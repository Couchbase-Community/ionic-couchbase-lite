(this.webpackJsonpexample=this.webpackJsonpexample||[]).push([[1],{53:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return d}));n(3);var r,a=n(19),u=n(0),i=n.n(u),s=n(4),o=n(2),c=n(6),l=n(7),h=n(38),f=function(e){return e.CapacitorPlatforms=function(e){var t=new Map;t.set("web",{name:"web"});var n=e.CapacitorPlatforms||{currentPlatform:{name:"web"},platforms:t};return n.addPlatform=function(e,t){n.platforms.set(e,t)},n.setPlatform=function(e){n.platforms.has(e)&&(n.currentPlatform=n.platforms.get(e))},n}(e)}("undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof e?e:{});f.addPlatform,f.setPlatform;!function(e){e.Unimplemented="UNIMPLEMENTED",e.Unavailable="UNAVAILABLE"}(r||(r={}));var p=function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(e,r){var a;return Object(o.a)(this,n),(a=t.call(this,e)).message=e,a.code=r,a}return n}(Object(h.a)(Error)),v=function(e){var t,n,r;return(null===e||void 0===e?void 0:e.androidBridge)?"android":(null===(n=null===(t=null===e||void 0===e?void 0:e.webkit)||void 0===t?void 0:t.messageHandlers)||void 0===n?void 0:n.bridge)?"ios":(null===(r=null===e||void 0===e?void 0:e.chrome)||void 0===r?void 0:r.webview)?"windows":"web"},y=function(e){return e.Capacitor=function(e){var t,n,u,o,c,l=e.Capacitor||{},h=l.Plugins=l.Plugins||{},f=e.CapacitorPlatforms,y=(null===(t=null===f||void 0===f?void 0:f.currentPlatform)||void 0===t?void 0:t.getPlatform)||function(){return v(e)},d=(null===(n=null===f||void 0===f?void 0:f.currentPlatform)||void 0===n?void 0:n.isNativePlatform)||function(){return"web"!==v(e)},b=(null===(u=null===f||void 0===f?void 0:f.currentPlatform)||void 0===u?void 0:u.isPluginAvailable)||function(e){var t=k.get(e);return!!(null===t||void 0===t?void 0:t.platforms.has(y()))||!!g(e)},g=(null===(o=null===f||void 0===f?void 0:f.currentPlatform)||void 0===o?void 0:o.getPluginHeader)||function(e){var t;return null===(t=l.PluginHeaders)||void 0===t?void 0:t.find((function(t){return t.name===e}))},k=new Map,m=(null===(c=null===f||void 0===f?void 0:f.currentPlatform)||void 0===c?void 0:c.registerPlugin)||function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=k.get(e);if(n)return console.warn('Capacitor plugin "'.concat(e,'" already registered. Cannot register plugins twice.')),n.proxy;var u,o=y(),c=g(e),f=function(){var e=Object(s.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u||!(o in t)){e.next=9;break}if("function"!==typeof t[o]){e.next=7;break}return e.next=4,t[o]();case 4:e.t0=u=e.sent,e.next=8;break;case 7:e.t0=u=t[o];case 8:u=e.t0;case 9:return e.abrupt("return",u);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=function(t,n){var a,u;if(!c){if(t)return null===(u=t[n])||void 0===u?void 0:u.bind(t);throw new p('"'.concat(e,'" plugin is not implemented on ').concat(o),r.Unimplemented)}var i=null===c||void 0===c?void 0:c.methods.find((function(e){return n===e.name}));return i?"promise"===i.rtype?function(t){return l.nativePromise(e,n.toString(),t)}:function(t,r){return l.nativeCallback(e,n.toString(),t,r)}:t?null===(a=t[n])||void 0===a?void 0:a.bind(t):void 0},d=function(t){var n,a=function(){for(var a=arguments.length,u=new Array(a),c=0;c<a;c++)u[c]=arguments[c];var l=f().then((function(a){var i=v(a,t);if(i){var s=i.apply(void 0,u);return n=null===s||void 0===s?void 0:s.remove,s}throw new p('"'.concat(e,".").concat(t,'()" is not implemented on ').concat(o),r.Unimplemented)}));return"addListener"===t&&(l.remove=Object(s.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n());case 1:case"end":return e.stop()}}),e)})))),l};return a.toString=function(){return"".concat(t.toString(),"() { [capacitor code] }")},Object.defineProperty(a,"name",{value:t,writable:!1,configurable:!1}),a},b=d("addListener"),m=d("removeListener"),O=function(e,t){var n=b({eventName:e},t),r=function(){var r=Object(s.a)(i.a.mark((function r(){var a;return i.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,n;case 2:a=r.sent,m({eventName:e,callbackId:a},t);case 4:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}(),a=new Promise((function(e){return n.then((function(){return e({remove:r})}))}));return a.remove=Object(s.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.warn("Using addListener() without 'await' is deprecated."),e.next=3,r();case 3:case"end":return e.stop()}}),e)}))),a},j=new Proxy({},{get:function(e,t){switch(t){case"$$typeof":return;case"toJSON":return function(){return{}};case"addListener":return c?O:b;case"removeListener":return m;default:return d(t)}}});return h[e]=j,k.set(e,{name:e,proxy:j,platforms:new Set([].concat(Object(a.a)(Object.keys(t)),Object(a.a)(c?[o]:[])))}),j};return l.convertFileSrc||(l.convertFileSrc=function(e){return e}),l.getPlatform=y,l.handleError=function(t){return e.console.error(t)},l.isNativePlatform=d,l.isPluginAvailable=b,l.pluginMethodNoop=function(e,t,n){return Promise.reject("".concat(n,' does not have an implementation of "').concat(t,'".'))},l.registerPlugin=m,l.Exception=p,l.DEBUG=!!l.DEBUG,l.isLoggingEnabled=!!l.isLoggingEnabled,l.platform=l.getPlatform(),l.isNative=l.isNativePlatform(),l}(e)}("undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof e?e:{}),d=y.registerPlugin;y.Plugins}).call(this,n(48))},62:function(e,t,n){var r={"./ion-action-sheet.entry.js":[87,5],"./ion-alert.entry.js":[88,6],"./ion-app_8.entry.js":[89,7],"./ion-avatar_3.entry.js":[90,17],"./ion-back-button.entry.js":[91,18],"./ion-backdrop.entry.js":[92,43],"./ion-button_2.entry.js":[93,19],"./ion-card_5.entry.js":[94,20],"./ion-checkbox.entry.js":[95,21],"./ion-chip.entry.js":[96,22],"./ion-col_3.entry.js":[97,44],"./ion-datetime_3.entry.js":[98,10],"./ion-fab_3.entry.js":[99,23],"./ion-img.entry.js":[100,45],"./ion-infinite-scroll_2.entry.js":[101,46],"./ion-input.entry.js":[102,24],"./ion-item-option_3.entry.js":[103,25],"./ion-item_8.entry.js":[104,26],"./ion-loading.entry.js":[105,27],"./ion-menu_3.entry.js":[106,28],"./ion-modal.entry.js":[107,8],"./ion-nav_2.entry.js":[108,14],"./ion-popover.entry.js":[109,9],"./ion-progress-bar.entry.js":[110,29],"./ion-radio_2.entry.js":[111,30],"./ion-range.entry.js":[112,31],"./ion-refresher_2.entry.js":[113,11],"./ion-reorder_2.entry.js":[114,16],"./ion-ripple-effect.entry.js":[115,47],"./ion-route_4.entry.js":[116,32],"./ion-searchbar.entry.js":[117,33],"./ion-segment_2.entry.js":[118,34],"./ion-select_3.entry.js":[119,35],"./ion-slide_2.entry.js":[120,48],"./ion-spinner.entry.js":[121,13],"./ion-split-pane.entry.js":[122,49],"./ion-tab-bar_2.entry.js":[123,36],"./ion-tab_2.entry.js":[124,15],"./ion-text.entry.js":[125,37],"./ion-textarea.entry.js":[126,38],"./ion-toast.entry.js":[127,39],"./ion-toggle.entry.js":[128,12],"./ion-virtual-scroll.entry.js":[129,50]};function a(e){if(!n.o(r,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=r[e],a=t[0];return n.e(t[1]).then((function(){return n(a)}))}a.keys=function(){return Object.keys(r)},a.id=62,e.exports=a},64:function(e,t,n){var r={"./ion-icon.entry.js":[130,57]};function a(e){if(!n.o(r,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=r[e],a=t[0];return n.e(t[1]).then((function(){return n(a)}))}a.keys=function(){return Object.keys(r)},a.id=64,e.exports=a},72:function(e,t,n){},84:function(e,t,n){},85:function(e,t,n){"use strict";n.r(t);var r,a=n(1),u=n.n(a),i=n(29),s=n.n(i),o=n(22),c=n(9),l=n(51),h=n(0),f=n.n(h),p=n(4),v=n(2),y=n(3),d=(n(72),n(53));!function(e){e[e.Value=0]="Value",e[e.FullText=1]="FullText",e[e.Geo=2]="Geo"}(r||(r={}));var b=function e(){Object(v.a)(this,e)},g=function e(){Object(v.a)(this,e)},k=n(19),m=n(28),O=n(6),j=n(7),w=function(){function e(){Object(v.a)(this,e)}return Object(y.a)(e,[{key:"multiply",value:function(e){return new S(this,e,_.Multiply)}},{key:"divide",value:function(e){return new S(this,e,_.Divide)}},{key:"modulo",value:function(e){return new S(this,e,_.Modulus)}},{key:"add",value:function(e){return new S(this,e,_.Add)}},{key:"subtract",value:function(e){return new S(this,e,_.Subtract)}},{key:"lessThan",value:function(e){return new S(this,e,_.LessThan)}},{key:"lessThanOrEqualTo",value:function(e){return new S(this,e,_.LessThanOrEqualTo)}},{key:"greaterThan",value:function(e){return new S(this,e,_.GreaterThan)}},{key:"greaterThanOrEqualTo",value:function(e){return new S(this,e,_.GreaterThanOrEqualTo)}},{key:"equalTo",value:function(e){return new S(this,e,S.OpType.EqualTo)}},{key:"notEqualTo",value:function(e){return new S(this,e,S.OpType.NotEqualTo)}},{key:"and",value:function(e){return new T([this,e],N.And)}},{key:"or",value:function(e){return new T([this,e],N.Or)}},{key:"like",value:function(e){return new S(this,e,S.OpType.Like)}},{key:"regex",value:function(e){return new S(this,e,S.OpType.RegexLike)}},{key:"is",value:function(e){return new S(this,e,S.OpType.Is)}},{key:"isNot",value:function(e){return new S(this,e,S.OpType.IsNot)}},{key:"between",value:function(e,t){var n=new D([e,t]);return new S(this,n,S.OpType.Between)}},{key:"isNullOrMissing",value:function(){return new L(this,L.OpType.Null).or(new L(this,L.OpType.Missing))}},{key:"notNullOrMissing",value:function(){return e.negated(this.isNullOrMissing())}},{key:"collate",value:function(e){return new E(this,e)}},{key:"in",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=new D(t);return new S(this,r,S.OpType.In)}}],[{key:"value",value:function(e){return new C(e)}},{key:"string",value:function(e){return new C(e)}},{key:"number",value:function(e){return new C(e)}},{key:"intValue",value:function(e){return new C(e)}},{key:"longValue",value:function(e){return new C(e)}},{key:"floatValue",value:function(e){return new C(e)}},{key:"doubleValue",value:function(e){return new C(e)}},{key:"booleanValue",value:function(e){return new C(e)}},{key:"date",value:function(e){return new C(e)}},{key:"all",value:function(){return new x("*")}},{key:"property",value:function(e){return new x(e)}},{key:"parameter",value:function(e){return new I(e)}},{key:"negated",value:function(e){return new T([e],T.OpType.Not)}},{key:"not",value:function(t){return e.negated(t)}}]),e}(),x=function(e){Object(O.a)(n,e);var t=Object(j.a)(n);function n(e){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return Object(v.a)(this,n),(r=t.call(this)).keyPath=e,r._from=a,r.columnName=u,r}return Object(y.a)(n,[{key:"from",value:function(e){return new n(this.keyPath,e)}},{key:"asJSON",value:function(){var e=[];return null!=this._from?e.push("."+this._from+"."+this.keyPath):e.push("."+this.keyPath),e}},{key:"getColumnName",value:function(){if(!this.columnName){var e=this.keyPath.split(".");this.columnName=e.pop()}return this.columnName}}],[{key:"allFrom",value:function(e){var t=e||n.kCBLAllPropertiesName;return new n(n.kCBLAllPropertiesName,e,t)}}]),n}(w);x.kCBLAllPropertiesName="";var _,C=function(e){Object(O.a)(n,e);var t=Object(j.a)(n);function n(e){var r;return Object(v.a)(this,n),(r=t.call(this)).value=e,r}return Object(y.a)(n,[{key:"asJSON",value:function(){return this.value instanceof Date?this.value.toISOString():this.value}}]),n}(w);!function(e){e[e.Add=0]="Add",e[e.Between=1]="Between",e[e.Divide=2]="Divide",e[e.EqualTo=3]="EqualTo",e[e.GreaterThan=4]="GreaterThan",e[e.GreaterThanOrEqualTo=5]="GreaterThanOrEqualTo",e[e.In=6]="In",e[e.Is=7]="Is",e[e.IsNot=8]="IsNot",e[e.LessThan=9]="LessThan",e[e.LessThanOrEqualTo=10]="LessThanOrEqualTo",e[e.Like=11]="Like",e[e.Modulus=12]="Modulus",e[e.Multiply=13]="Multiply",e[e.NotEqualTo=14]="NotEqualTo",e[e.Subtract=15]="Subtract",e[e.RegexLike=16]="RegexLike"}(_||(_={}));var S=function(e){Object(O.a)(n,e);var t=Object(j.a)(n);function n(e,r,a){var u;return Object(v.a)(this,n),(u=t.call(this)).lhs=e,u.rhs=r,u.type=a,u}return Object(y.a)(n,[{key:"asJSON",value:function(){var e=[];switch(this.type){case _.Add:e.push("+");break;case _.Between:e.push("BETWEEN");break;case _.Divide:e.push("/");break;case _.EqualTo:e.push("=");break;case _.GreaterThan:e.push(">");break;case _.GreaterThanOrEqualTo:e.push(">=");break;case _.In:e.push("IN");break;case _.Is:e.push("IS");break;case _.IsNot:e.push("IS NOT");break;case _.LessThan:e.push("<");break;case _.LessThanOrEqualTo:e.push("<=");break;case _.Like:e.push("LIKE");break;case _.Modulus:e.push("%");break;case _.Multiply:e.push("*");break;case _.NotEqualTo:e.push("!=");break;case _.RegexLike:e.push("regexp_like()");break;case _.Subtract:e.push("-")}if(e.push(this.lhs.asJSON()),this.type==_.Between){var t=this.rhs.getExpressions();e.push(t[0].asJSON()),e.push(t[1].asJSON())}else e.push(this.rhs.asJSON());return e}}]),n}(w);S.OpType=_;var N,D=function(e){Object(O.a)(n,e);var t=Object(j.a)(n);function n(e){var r;return Object(v.a)(this,n),(r=t.call(this)).expressions=e,r}return Object(y.a)(n,[{key:"getExpressions",value:function(){return this.expressions}},{key:"asJSON",value:function(){var e=[];e.push("[]");var t,n=Object(m.a)(this.expressions);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.push(r.asJSON())}}catch(a){n.e(a)}finally{n.f()}return e}}]),n}(w),I=function(e){Object(O.a)(n,e);var t=Object(j.a)(n);function n(e){var r;return Object(v.a)(this,n),(r=t.call(this)).name=e,r}return Object(y.a)(n,[{key:"asJSON",value:function(){return["$"+this.name]}}]),n}(w);!function(e){e[e.And=0]="And",e[e.Or=1]="Or",e[e.Not=2]="Not"}(N||(N={}));var R,T=function(e){Object(O.a)(n,e);var t=Object(j.a)(n);function n(e,r){var a;return Object(v.a)(this,n),(a=t.call(this)).subexpressions=e,a.type=r,a}return Object(y.a)(n,[{key:"asJSON",value:function(){var e=[];switch(this.type){case N.And:e.push("AND");break;case N.Or:e.push("OR");break;case N.Not:e.push("NOT")}return e.push.apply(e,Object(k.a)(this.subexpressions.map((function(e){return e.asJSON()})))),e}}]),n}(w);T.OpType=N,function(e){e[e.Missing=0]="Missing",e[e.NotMissing=1]="NotMissing",e[e.NotNull=2]="NotNull",e[e.Null=3]="Null"}(R||(R={}));var L=function(e){Object(O.a)(n,e);var t=Object(j.a)(n);function n(e,r){var a;if(Object(v.a)(this,n),(a=t.call(this)).operand=e,a.type=r,null==e)throw new Error("operand is null.");return a}return Object(y.a)(n,[{key:"asJSON",value:function(){var e=this.operand.asJSON();switch(this.type){case R.Missing:return["IS",e,["MISSING"]];case R.NotMissing:return["IS NOT",e,["MISSING"]];case R.Null:return["IS",e,null];case R.NotNull:return["IS NOT",e,null];default:return[]}}}]),n}(w);L.OpType=R;var A,E=function(e){Object(O.a)(n,e);var t=Object(j.a)(n);function n(e,r){var a;return Object(v.a)(this,n),(a=t.call(this)).operand=e,a.collation=r,a}return Object(y.a)(n,[{key:"asJSON",value:function(){return["COLLATE",this.collation.asJSON(),this.operand.asJSON()]}}]),n}(w),B=function(e){Object(O.a)(n,e);var t=Object(j.a)(n);function n(e,r){var a;return Object(v.a)(this,n),(a=t.call(this)).func=e,a.params=r,a}return Object(y.a)(n,[{key:"asJSON",value:function(){var e=[this.func];return e.push.apply(e,Object(k.a)(this.params.map((function(e){return e.asJSON()})))),e}}]),n}(w),P=function(){function e(){Object(v.a)(this,e)}return Object(y.a)(e,null,[{key:"contains",value:function(e,t){return new B("ARRAY_CONTAINS()",[e,t])}},{key:"len",value:function(e){return new B("ARRAY_LENGTH()",[e])}}]),e}(),q=n(14);!function(e){e.PUSH_AND_PULL="PUSH_AND_PULL",e.PUSH="PUSH",e.PULL="PULL"}(A||(A={}));var J=function(){function e(t,n){Object(v.a)(this,e),this.database=t,this.target=n,this.readonly=!1,this.continuous=!1,this.readonly=!1,this.replicatorType=A.PUSH_AND_PULL,this.database=t,this.target=n}return Object(y.a)(e,[{key:"getDatabase",value:function(){return this.database}},{key:"setReplicatorType",value:function(e){this.replicatorType=e}},{key:"setContinuous",value:function(e){this.continuous=e}},{key:"setAuthenticator",value:function(e){this.authenticator=e}},{key:"setPinnedServerCertificate",value:function(e){this.pinnedServerCertificate=e}},{key:"setHeaders",value:function(e){this.headers=e}},{key:"setChannels",value:function(e){this.channels=e}},{key:"setDocumentIDs",value:function(e){this.documentIds=e}},{key:"toJson",value:function(){return{replicatorType:this.replicatorType,continuous:this.continuous,authenticator:{type:this.authenticator.getType(),data:this.authenticator.toJson()},target:this.target.toJson(),headers:this.headers,pinnedServerCertificate:this.pinnedServerCertificate,channels:this.channels,documentIds:this.documentIds}}}]),e}();J.ReplicatorType=A,J.kC4ReplicatorOptionExtraHeaders="headers",J.kC4ReplicatorOptionCookies="cookies",J.kCBLReplicatorAuthOption="auth",J.kC4ReplicatorOptionPinnedServerCert="pinnedCert",J.kC4ReplicatorOptionDocIDs="docIDs",J.kC4ReplicatorOptionChannels="channels",J.kC4ReplicatorOptionFilter="filter",J.kC4ReplicatorOptionFilterParams="filterParams",J.kC4ReplicatorOptionSkipDeleted="skipDeleted",J.kC4ReplicatorOptionNoConflicts="noConflicts",J.kC4ReplicatorCheckpointInterval="checkpointInterval",J.kC4ReplicatorOptionRemoteDBUniqueID="remoteDBUniqueID",J.kC4ReplicatorResetCheckpoint="reset",J.kC4ReplicatorAuthType="type",J.kCBLReplicatorAuthUserName="username",J.kCBLReplicatorAuthPassword="password",J.kC4ReplicatorAuthClientCert="clientCert",J.kC4AuthTypeBasic="Basic",J.kC4AuthTypeSession="Session",J.kC4AuthTypeOpenIDConnect="OpenID Connect",J.kC4AuthTypeFacebook="Facebook",J.kC4AuthTypeClientCert="Client Cert";var G,F,U,M=function(e){Object(O.a)(n,e);var t=Object(j.a)(n);function n(e,r){var a;return Object(v.a)(this,n),(a=t.call(this)).username=e,a.password=r,a}return Object(y.a)(n,[{key:"authenticate",value:function(e){var t,n=(t={},Object(q.a)(t,J.kC4ReplicatorAuthType,J.kC4AuthTypeBasic),Object(q.a)(t,J.kCBLReplicatorAuthUserName,this.username),Object(q.a)(t,J.kCBLReplicatorAuthPassword,this.password),t);return e[J.kCBLReplicatorAuthOption]=n,n}},{key:"getType",value:function(){return"basic"}},{key:"toJson",value:function(){return{username:this.username,password:this.password}}}]),n}(g),V=function(){function e(t,n){Object(v.a)(this,e),this.contentType=t,this.bytes=n}return Object(y.a)(e,[{key:"getContentType",value:function(){return this.contentType}},{key:"getDigest",value:function(){return this.digest}},{key:"getLength",value:function(){return this.length}},{key:"toDictionary",value:function(){return{contentType:this.contentType,data:Array.from(new Uint8Array(this.bytes))}}}]),e}(),H=n(38),W=function(e){Object(O.a)(n,e);var t=Object(j.a)(n);function n(e,r,a){var u;return Object(v.a)(this,n),(u=t.call(this)).message=e,u.domain=r,u.code=a,u}return n}(Object(H.a)(Error)),z=function(){function e(t){Object(v.a)(this,e),this.source=t,this.alias=null}return Object(y.a)(e,[{key:"getSource",value:function(){return this.source}},{key:"getAlias",value:function(){return this.alias}},{key:"setAlias",value:function(e){this.alias=e}},{key:"getColumnName",value:function(){return this.alias?this.alias:this.source&&this.source.getName?this.source.getName():null}},{key:"asJSON",value:function(){return this.alias?{AS:this.alias}:{}}}],[{key:"database",value:function(e){return new K(e)}}]),e}(),K=function(e){Object(O.a)(n,e);var t=Object(j.a)(n);function n(e){return Object(v.a)(this,n),t.call(this,e)}return Object(y.a)(n,[{key:"as",value:function(e){return this.setAlias(e),this}}]),n}(z),Q=function(){function e(){Object(v.a)(this,e)}return Object(y.a)(e,[{key:"getDirectory",value:function(){return this.directory}},{key:"setDirectory",value:function(e){return this.directory=e,this}},{key:"getEncryptionKey",value:function(){return this.encryptionKey}},{key:"setEncryptionKey",value:function(e){return this.encryptionKey=e,this}}]),e}(),Y=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object(v.a)(this,e),this.id=t,this.sequenceNo=n,this.doc={},this.doc=r}return Object(y.a)(e,[{key:"count",value:function(){return Object.keys(this.doc).length}},{key:"getData",value:function(){return this.doc}},{key:"_get",value:function(e){return this.doc[e]}},{key:"getArray",value:function(e){return this._get(e)}},{key:"getBlob",value:function(e){var t=this._get(e);if(t.content_type){var n=new V(t.content_type,null);return n.digest=t.digest,n.length=t.length,n}return this._get(e)}},{key:"getBlobContent",value:function(e,t){return t.getEngine().Document_GetBlobContent(t,this.getId(),e)}},{key:"getBoolean",value:function(e){return this._get(e)}},{key:"getDate",value:function(e){return this._get(e)}},{key:"getDictionary",value:function(e){return this._get(e)}},{key:"getDouble",value:function(e){return this._get(e)}},{key:"getFloat",value:function(e){return this._get(e)}},{key:"getId",value:function(){return this.id}},{key:"getInt",value:function(e){return this._get(e)}},{key:"getKeys",value:function(){return Object.keys(this.doc)}},{key:"getLong",value:function(e){return this._get(e)}},{key:"getSequence",value:function(){return this.sequenceNo}},{key:"getString",value:function(e){return this._get(e)}},{key:"getValue",value:function(e){return this._get(e)}},{key:"toDictionary",value:function(){return this.doc}}]),e}(),Z=function(){function e(t){Object(v.a)(this,e),this.db=t}return Object(y.a)(e,[{key:"setFileConfig",value:function(e){return this.db.getEngine().Database_SetFileLoggingConfig(this.db,e)}}]),e}(),X=function(){function e(t,n,r){Object(v.a)(this,e),this.query=t,this.resultSetId=n,this.columnNames=r}return Object(y.a)(e,[{key:"allResults",value:function(){var e=this;return new Promise((function(t,n){var r=e.query.getFrom().getSource(),a=[];r.getEngine().ResultSet_AllResults(r,e.resultSetId,(function(e,r){r?n(r):(0===e.length&&t(a),a.push.apply(a,Object(k.a)(e)))}))}))}},{key:"next",value:function(){var e=this.query.getFrom().getSource();return e.getEngine().ResultSet_Next(e,this.resultSetId)}},{key:"nextBatch",value:function(){var e=Object(p.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.query.getFrom().getSource(),e.next=3,t.getEngine().ResultSet_NextBatch(t,this.resultSetId);case 3:return e.abrupt("return",e.sent.results);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanup",value:function(){var e=this.query.getFrom().getSource();return e.getEngine().ResultSet_Cleanup(e,this.resultSetId)}},{key:"forEach",value:function(){var e=Object(p.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.next();case 2:if(!(n=e.sent)){e.next=6;break}t(n),e.next=0;break;case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),$=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(v.a)(this,e),this.Plugin_Configure(t)}return Object(y.a)(e,[{key:"Plugin_Configure",value:function(){var e=Object(p.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Qe.Plugin_Configure({config:t}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"Database_Open",value:function(){var e=Object(p.a)(f.a.mark((function e(t,n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Qe.Database_Open({name:t,config:n}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"Database_Save",value:function(){var e=Object(p.a)(f.a.mark((function e(t,n,r){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={name:t.getName(),id:n.getId(),document:n.toDictionary()},r&&(a.concurrencyControl=r),e.abrupt("return",Qe.Database_Save(a));case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"Database_AddChangeListener",value:function(e,t){return Qe.Database_AddChangeListener({name:e.getName()},t)}},{key:"Database_GetCount",value:function(){var e=Object(p.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Qe.Database_GetCount({name:t.getName()}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"Database_GetPath",value:function(){var e=Object(p.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Qe.Database_GetPath({name:t.getName()}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"Database_Copy",value:function(){var e=Object(p.a)(f.a.mark((function e(t,n,r,a){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Qe.Database_Copy({name:t.getName(),path:n,newName:r,config:a}));case 1:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"Database_CreateIndex",value:function(){var e=Object(p.a)(f.a.mark((function e(t,n,r){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Qe.Database_CreateIndex({name:t.getName(),indexName:n,index:r.toJson()}));case 1:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"Database_DeleteIndex",value:function(){var e=Object(p.a)(f.a.mark((function e(t,n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Qe.Database_DeleteIndex({name:t.getName(),indexName:n}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"Database_GetIndexes",value:function(){var e=Object(p.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Qe.Database_GetIndexes({name:t.getName()}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"Database_Exists",value:function(){var e=Object(p.a)(f.a.mark((function e(t,n,r){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Qe.Database_Exists({name:t.getName(),existsName:n,directory:r}));case 1:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"Database_Close",value:function(){var e=Object(p.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Qe.Database_Close({name:t.getName()}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"Database_Compact",value:function(){var e=Object(p.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Qe.Database_Compact({name:t.getName()}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"Database_Delete",value:function(){var e=Object(p.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Qe.Database_Delete({name:t.getName()}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"Database_PurgeDocument",value:function(){var e=Object(p.a)(f.a.mark((function e(t,n){var r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="string"===typeof n?n:n.getId(),e.abrupt("return",Qe.Database_PurgeDocument({name:t.getName(),docId:r}));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"Database_DeleteDocument",value:function(){var e=Object(p.a)(f.a.mark((function e(t,n,r){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Qe.Database_DeleteDocument({name:t.getName(),docId:n.getId(),document:n.toDictionary(),concurrencyControl:r}));case 1:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"Database_GetDocument",value:function(){var e=Object(p.a)(f.a.mark((function e(t,n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Qe.Database_GetDocument({name:t.getName(),docId:n}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"Database_SetLogLevel",value:function(){var e=Object(p.a)(f.a.mark((function e(t,n,r){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Qe.Database_SetLogLevel({name:t.getName(),domain:n,logLevel:r}));case 1:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"Database_SetFileLoggingConfig",value:function(){var e=Object(p.a)(f.a.mark((function e(t,n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Qe.Database_SetFileLoggingConfig({name:t.getName(),config:n}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"Document_GetBlobContent",value:function(){var e=Object(p.a)(f.a.mark((function e(t,n,r){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qe.Database_GetBlobContent({name:t.getName(),documentId:n,key:r});case 2:return a=e.sent,e.abrupt("return",new Uint8Array(a.data).buffer);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"Query_Execute",value:function(){var e=Object(p.a)(f.a.mark((function e(t,n){var r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qe.Query_Execute({name:t.getName(),query:n.toJson()});case 2:return r=e.sent,e.abrupt("return",new X(n,r.id,n.getColumnNames()));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"ResultSet_Next",value:function(){var e=Object(p.a)(f.a.mark((function e(t,n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Qe.ResultSet_Next({name:t.getName(),resultSetId:n}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"ResultSet_NextBatch",value:function(){var e=Object(p.a)(f.a.mark((function e(t,n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Qe.ResultSet_NextBatch({name:t.getName(),resultSetId:n}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"ResultSet_AllResults",value:function(e,t,n){return Qe.ResultSet_AllResults({name:e.getName(),resultSetId:t},n)}},{key:"ResultSet_Cleanup",value:function(){var e=Object(p.a)(f.a.mark((function e(t,n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Qe.ResultSet_Cleanup({name:t.getName(),resultSetId:n}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"Replicator_Create",value:function(){var e=Object(p.a)(f.a.mark((function e(t,n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Qe.Replicator_Create({name:t.getName(),config:n.toJson()}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"Replicator_Start",value:function(){var e=Object(p.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Qe.Replicator_Start({replicatorId:t}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"Replicator_Restart",value:function(){var e=Object(p.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Qe.Replicator_Restart({replicatorId:t}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"Replicator_AddChangeListener",value:function(e,t){return Qe.Replicator_AddChangeListener({replicatorId:e},t)}},{key:"Replicator_AddDocumentListener",value:function(e,t){return Qe.Replicator_AddDocumentListener({replicatorId:e},t)}},{key:"Replicator_Stop",value:function(){var e=Object(p.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Qe.Replicator_Stop({replicatorId:t}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"Replicator_ResetCheckpoint",value:function(){var e=Object(p.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Qe.Replicator_ResetCheckpoint({replicatorId:t}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"Replicator_GetStatus",value:function(){var e=Object(p.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Qe.Replicator_GetStatus({replicatorId:t}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"Replicator_Cleanup",value:function(){var e=Object(p.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Qe.Replicator_Cleanup({replicatorId:t}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}();!function(e){e[e.LAST_WRITE_WINS=0]="LAST_WRITE_WINS",e[e.FAIL_ON_CONFLICT=1]="FAIL_ON_CONFLICT"}(G||(G={})),function(e){e.ALL="ALL",e.DATABASE="DATABASE",e.NETWORK="NETWORK",e.QUERY="QUERY",e.REPLICATOR="REPLICATOR"}(F||(F={})),function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARNING=3]="WARNING",e[e.ERROR=4]="ERROR",e[e.NONE=5]="NONE"}(U||(U={}));var ee,te=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;Object(v.a)(this,e),this.name=t,this.config=n,this._documents={},this.changeListenerTokens=[],this._engine=new $,this.didStartListener=!1,this.log=new Z(this)}return Object(y.a)(e,[{key:"open",value:function(){return this._engine.Database_Open(this.name,this.config)}},{key:"getEngine",value:function(){return this._engine}},{key:"addChangeListener",value:function(e){var t=this;this.changeListenerTokens.push(e),this.didStartListener||(this._engine.Database_AddChangeListener(this,(function(e,n){n?console.log("Database change listener error",n):t.notifyDatabaseChangeListeners(e)})),this.didStartListener=!0)}},{key:"notifyDatabaseChangeListeners",value:function(e){this.changeListenerTokens.forEach((function(t){return t(e)}))}},{key:"addDocumentChangeListener",value:function(e,t){return null}},{key:"removeChangeListener",value:function(e){this.changeListenerTokens=this.changeListenerTokens.filter((function(t){return t!==e}))}},{key:"close",value:function(){return this._engine.Database_Close(this)}},{key:"compact",value:function(){return this._engine.Database_Compact(this)}},{key:"copy",value:function(e,t,n){return this._engine.Database_Copy(this,e,t,n)}},{key:"createIndex",value:function(e,t){return this._engine.Database_CreateIndex(this,e,t)}},{key:"deleteDocument",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._engine.Database_DeleteDocument(this,e,t)}},{key:"purgeDocument",value:function(e){return this._engine.Database_PurgeDocument(this,e)}},{key:"deleteDatabase",value:function(){return this._engine.Database_Delete(this)}},{key:"deleteIndex",value:function(e){return this._engine.Database_DeleteIndex(this,e)}},{key:"exists",value:function(){var e=Object(p.a)(f.a.mark((function e(t,n){var r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._engine.Database_Exists(this,t,n);case 2:return r=e.sent,e.abrupt("return",r.exists);case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return this.config}},{key:"getCount",value:function(){var e=Object(p.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._engine.Database_GetCount(this);case 2:return t=e.sent,e.abrupt("return",Promise.resolve(t.count));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getDocument",value:function(){var e=Object(p.a)(f.a.mark((function e(t){var n,r,a,u;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._engine.Database_GetDocument(this,t);case 2:if(!(n=e.sent)){e.next=10;break}return r=n._data,a=n._sequence,u=n._id,e.abrupt("return",Promise.resolve(new Y(u,a,r)));case 10:return e.abrupt("return",Promise.resolve(null));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIndexes",value:function(){var e=Object(p.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._engine.Database_GetIndexes(this);case 2:return e.abrupt("return",e.sent.indexes);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getName",value:function(){return this.name}},{key:"getPath",value:function(){var e=Object(p.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._engine.Database_GetPath(this);case 2:return e.abrupt("return",e.sent.path);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"inBatch",value:function(e){return Promise.reject(null)}},{key:"save",value:function(){var e=Object(p.a)(f.a.mark((function e(t){var n,r,a,u=arguments;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=u.length>1&&void 0!==u[1]?u[1]:null,e.next=3,this._engine.Database_Save(this,t,n);case 3:r=e.sent,a=r._id,t.setId(a),this._documents[a]=t;case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setLogLevel",value:function(e,t){return this._engine.Database_SetLogLevel(this,e,t)}}]),e}();!function(e){e.DELETED="DELETED",e.ACCESS_REMOVED="ACCESS_REMOVED"}(ee||(ee={}));var ne,re=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;Object(v.a)(this,e),this.id=t,this.flags=n,this.error=r}return Object(y.a)(e,[{key:"getId",value:function(){return this.id}},{key:"getFlags",value:function(){return this.flags}},{key:"getError",value:function(){return this.error}}]),e}();!function(e){e.PUSH="PUSH",e.PULL="PULL"}(ne||(ne={}));var ae=function(){function e(t,n){Object(v.a)(this,e),this.direction=t,this.documents=n}return Object(y.a)(e,[{key:"getDirection",value:function(){return this.direction}},{key:"getDocuments",value:function(){return this.documents}}]),e}();function ue(e){try{var t=e;if(t.documents.forEach((function(e){if(!function(e){try{var t=e;if(t.flags.forEach((function(e){if(void 0==ee[e])throw"unrecognized replication flag "+e})),null==t.id)throw"document id cannot be null";if(null!=t.error&&(null==t.error.message||null==t.error.domain||null==t.error.code))throw"document error is incomplete";return!0}catch(n){return console.warn("Invalid ReplicatedDocumentRepresentation:",n),!1}}(e))throw"invalid replicated document"})),void 0==ne[t.direction])throw"unrecognized replication direction "+t.direction;return!0}catch(n){return console.warn("Invalid DocumentReplicationRepresentation:",n),!1}}var ie=function(){function e(){Object(v.a)(this,e),this.columnNames={}}return Object(y.a)(e,[{key:"addChangeListener",value:function(e){}},{key:"removeChangeListener",value:function(e){}},{key:"copy",value:function(e){this._select=e._select,this._from=e._from,this._joins=e._joins,this._where=e._where,this._groupBy=e._groupBy,this._having=e._having,this._orderBy=e._orderBy,this._limit=e._limit,this.parameters=e.parameters}},{key:"setSelect",value:function(e){this._select=e}},{key:"setFrom",value:function(e){this._from=e}},{key:"setJoins",value:function(e){this._joins=e}},{key:"setWhere",value:function(e){this._where=e}},{key:"setGroupBy",value:function(e){this._groupBy=e}},{key:"setHaving",value:function(e){this._having=e}},{key:"setOrderBy",value:function(e){this._orderBy=e}},{key:"setLimit",value:function(e){this._limit=e}},{key:"getFrom",value:function(){return this._from}},{key:"getColumnNames",value:function(){return this.columnNames}},{key:"check",value:function(){this.columnNames||(this.columnNames=this.generateColumnNames())}},{key:"execute",value:function(){var e=this._from&&this._from.getSource();return e.getEngine().Query_Execute(e,this)}},{key:"explain",value:function(){var e=this._asJSON();return console.log("Explaining query",e),Promise.reject(null)}},{key:"generateColumnNames",value:function(){var e=this,t={},n=0;return this._select.getSelectResults().forEach((function(r,a){var u=r.getColumnName();if(u&&u===x.kCBLAllPropertiesName&&(u=e._from.getColumnName()),u||(u="$".concat(++n)),u in t)throw new Error("Duplicate select result named "+u);t[u]=a})),t}},{key:"getParameters",value:function(){return this.parameters}},{key:"setParameters",value:function(e){this.parameters=e}},{key:"toString",value:function(){return this._asJSON()}},{key:"toJson",value:function(){return this._asJSON()}},{key:"_asJSON",value:function(){var e={};null!=this._select&&this._select.isDistinct()&&(e.DISTINCT=!0),null!=this._select&&this._select.hasSelectResults()&&(e.WHAT=this._select.asJSON());var t=[],n=this._from.asJSON();if(Object.keys(n).length>0&&t.push(n),null!=this._joins&&t.push.apply(t,Object(k.a)(this._joins.asJSON())),t.length>0&&(e.FROM=t),null!=this._where&&(e.WHERE=this._where.asJSON()),null!=this._groupBy&&(e.GROUP_BY=this._groupBy.asJSON()),null!=this._having&&(e.HAVING=this._having.asJSON()),null!=this._orderBy&&(e.ORDER_BY=this._orderBy.asJSON()),null!=this._limit){var r=this._limit.asJSON();e.LIMIT=r[0],r.length>1&&(e.OFFSET=r[1])}return e}}]),e}(),se=n(10),oe=function(e){Object(O.a)(n,e);var t=Object(j.a)(n);function n(e,r){var a;return Object(v.a)(this,n),(a=t.call(this)).query=e,a.expression=r,a.copy(e),a.setHaving(Object(se.a)(a)),a}return Object(y.a)(n,[{key:"asJSON",value:function(){return this.expression&&this.expression.asJSON()||null}}]),n}(ie),ce=function(e){Object(O.a)(n,e);var t=Object(j.a)(n);function n(e,r){var a,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return Object(v.a)(this,n),(a=t.call(this)).query=e,a.limit=r,a.offset=u,a.copy(e),a.setLimit(Object(se.a)(a)),a}return Object(y.a)(n,[{key:"asJSON",value:function(){var e=[this.limit.asJSON()];return this.offset&&e.push(this.offset.asJSON()),e}}]),n}(ie),le=function(e){Object(O.a)(n,e);var t=Object(j.a)(n);function n(e,r){var a;return Object(v.a)(this,n),(a=t.call(this)).query=e,a.orderings=r,a.copy(e),a.setOrderBy(Object(se.a)(a)),a}return Object(y.a)(n,[{key:"limit",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new ce(this,e,t)}},{key:"asJSON",value:function(){return this.orderings.map((function(e){return e.asJSON()}))}}]),n}(ie),he=function(e){Object(O.a)(n,e);var t=Object(j.a)(n);function n(e,r){var a;return Object(v.a)(this,n),(a=t.call(this)).query=e,a.expressions=r,a.copy(e),a.setGroupBy(Object(se.a)(a)),a}return Object(y.a)(n,[{key:"having",value:function(e){return new oe(this,e)}},{key:"orderBy",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new le(this,t)}},{key:"limit",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new ce(this,e,t)}},{key:"asJSON",value:function(){return this.expressions.map((function(e){return e.asJSON()}))}}]),n}(ie),fe=function(e){Object(O.a)(n,e);var t=Object(j.a)(n);function n(e,r){var a;return Object(v.a)(this,n),(a=t.call(this)).query=e,a.where=r,a.copy(e),a.setWhere(r),a}return Object(y.a)(n,[{key:"groupBy",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new he(this,t)}},{key:"orderBy",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new le(this,t)}},{key:"limit",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new ce(this,e,t)}}]),n}(ie),pe=function(e){Object(O.a)(n,e);var t=Object(j.a)(n);function n(e,r){var a;return Object(v.a)(this,n),(a=t.call(this)).query=e,a.joins=r,a.copy(e),a.setJoins(Object(se.a)(a)),a}return Object(y.a)(n,[{key:"where",value:function(e){return new fe(this,e)}},{key:"orderBy",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new le(this,t)}},{key:"limit",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new ce(this,e,t)}},{key:"asJSON",value:function(){return this.joins.map((function(e){return e.asJSON()}))}}]),n}(ie),ve=function(e){Object(O.a)(n,e);var t=Object(j.a)(n);function n(e,r){var a;return Object(v.a)(this,n),(a=t.call(this)).query=e,a.dataSource=r,a.copy(e),a.setFrom(r),a}return Object(y.a)(n,[{key:"groupBy",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new he(this,t)}},{key:"join",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new pe(this,t)}},{key:"limit",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new ce(this,e,t)}},{key:"orderBy",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new le(this,t)}},{key:"where",value:function(e){return new fe(this,e)}}]),n}(ie),ye=function(){function e(){Object(v.a)(this,e)}return Object(y.a)(e,null,[{key:"avg",value:function(e){return new B("AVG()",[e])}},{key:"count",value:function(e){return new B("COUNT()",[e])}},{key:"min",value:function(e){return new B("MIN()",[e])}},{key:"max",value:function(e){return new B("MAX()",[e])}},{key:"sum",value:function(e){return new B("SUM()",[e])}},{key:"abs",value:function(e){return new B("ABS()",[e])}},{key:"acos",value:function(e){return new B("ACOS()",[e])}},{key:"asin",value:function(e){return new B("ASIN()",[e])}},{key:"atan",value:function(e){return new B("ATAN()",[e])}},{key:"atan2",value:function(e,t){return new B("ATAN2()",[e,t])}},{key:"ceil",value:function(e){return new B("CEIL()",[e])}},{key:"cos",value:function(e){return new B("COS()",[e])}},{key:"degrees",value:function(e){return new B("DEGREES()",[e])}},{key:"e",value:function(){return new B("E()",[null])}},{key:"exp",value:function(e){return new B("EXP()",[e])}},{key:"floor",value:function(e){return new B("FLOOR()",[e])}},{key:"ln",value:function(e){return new B("LN()",[e])}},{key:"log",value:function(e){return new B("LOG()",[e])}},{key:"pi",value:function(){return new B("PI()",[null])}},{key:"power",value:function(e,t){return new B("POWER()",[e,t])}},{key:"radians",value:function(e){return new B("RADIANS()",[e])}},{key:"round",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new B("ROUND()",t?[e,t]:[e])}},{key:"sign",value:function(e){return new B("SIGN()",[e])}},{key:"sin",value:function(e){return new B("SIN()",[e])}},{key:"sqrt",value:function(e){return new B("SQRT()",[e])}},{key:"tan",value:function(e){return new B("TAN()",[e])}},{key:"trunc",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new B("TRUNC()",t?[e,t]:[e])}},{key:"contains",value:function(e,t){return new B("CONTAINS()",[e,t])}},{key:"len",value:function(e){return new B("LENGTH()",[e])}},{key:"lower",value:function(e){return new B("LOWER()",[e])}},{key:"ltrim",value:function(e){return new B("LTRIM()",[e])}},{key:"rtrim",value:function(e){return new B("RTRIM()",[e])}},{key:"trim",value:function(e){return new B("TRIM()",[e])}},{key:"upper",value:function(e){return new B("UPPER()",[e])}}]),e}(),de=function(){function e(t){Object(v.a)(this,e),this.name=t}return Object(y.a)(e,[{key:"match",value:function(e){return new be(this.name,e)}}],[{key:"index",value:function(t){return new e(t)}}]),e}(),be=function(e){Object(O.a)(n,e);var t=Object(j.a)(n);function n(e,r){var a;return Object(v.a)(this,n),(a=t.call(this)).indexName=e,a.text=r,a}return Object(y.a)(n,[{key:"asJSON",value:function(){return["MATCH",this.indexName,this.text]}}]),n}(w),ge=function(e){Object(O.a)(n,e);var t=Object(j.a)(n);function n(){var e;Object(v.a)(this,n),(e=t.call(this))._language=n.getDefaultLanguage(),e._ignoreAccents=!1;for(var r=arguments.length,a=new Array(r),u=0;u<r;u++)a[u]=arguments[u];return e.indexItems=a,e}return Object(y.a)(n,[{key:"setLanguage",value:function(e){return this._language=e,this}},{key:"setIgnoreAccents",value:function(e){return this._ignoreAccents=e,this}},{key:"type",value:function(){return r.FullText}},{key:"language",value:function(){return this._language}},{key:"ignoreAccents",value:function(){return this._ignoreAccents}},{key:"items",value:function(){var e,t=[],n=Object(m.a)(this.indexItems);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push(r.expression.asJSON())}}catch(a){n.e(a)}finally{n.f()}return t}},{key:"toJson",value:function(){return{type:"full-text",language:this._language,ignoreAccents:this._ignoreAccents,items:this.items()}}}],[{key:"getDefaultLanguage",value:function(){return"en"}}]),n}(b),ke=function(){function e(t){Object(v.a)(this,e),this.expression=t,this.expression=t}return Object(y.a)(e,null,[{key:"property",value:function(t){return new e(w.property(t))}}]),e}(),me=n(34),Oe=function(e){Object(O.a)(n,e);var t=Object(j.a)(n);function n(){var e;Object(v.a)(this,n),e=t.call(this);for(var r=arguments.length,a=new Array(r),u=0;u<r;u++)a[u]=arguments[u];return e.indexItems=a,e}return Object(y.a)(n,[{key:"type",value:function(){return r.Value}},{key:"language",value:function(){return null}},{key:"ignoreAccents",value:function(){return!1}},{key:"items",value:function(){var e,t=[],n=Object(m.a)(this.indexItems);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push(r.expr.asJSON())}}catch(a){n.e(a)}finally{n.f()}return t}},{key:"toJson",value:function(){return{type:"value",items:this.items()}}}]),n}(b),je=function(){function e(t){Object(v.a)(this,e),this.expr=t}return Object(y.a)(e,null,[{key:"property",value:function(t){return new e(w.property(t))}},{key:"expression",value:function(t){return new e(t)}}]),e}(),we=function(){function e(){Object(v.a)(this,e)}return Object(y.a)(e,null,[{key:"valueIndex",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Object(me.a)(Oe,t)}},{key:"fullTextIndex",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Object(me.a)(ge,t)}}]),e}(),xe=function(){function e(t,n){Object(v.a)(this,e),this.type=t,this.dataSource=n}return Object(y.a)(e,[{key:"asJSON",value:function(){return Object.assign({JOIN:this.type},this.dataSource.asJSON())}}],[{key:"join",value:function(e){return this.innerJoin(e)}},{key:"leftJoin",value:function(t){return new _e(e.kCBLLeftOuterJoin,t)}},{key:"leftOuterJoin",value:function(t){return new _e(e.kCBLLeftOuterJoin,t)}},{key:"innerJoin",value:function(t){return new _e(e.kCBLInnerJoin,t)}},{key:"crossJoin",value:function(t){return new _e(e.kCBLCrossJoin,t)}}]),e}();xe.kCBLInnerJoin="INNER",xe.kCBLOuterJoin="OUTER",xe.kCBLLeftOuterJoin="LEFT OUTER",xe.kCBLCrossJoin="CROSS";var _e=function(e){Object(O.a)(n,e);var t=Object(j.a)(n);function n(e,r){return Object(v.a)(this,n),t.call(this,e,r)}return Object(y.a)(n,[{key:"on",value:function(e){return this._on=e,this}},{key:"asJSON",value:function(){return Object.assign({JOIN:this.type,ON:this._on.asJSON()},this.dataSource.asJSON())}}]),n}(xe),Ce=function(e){Object(O.a)(n,e);var t=Object(j.a)(n);function n(e,r,a){var u;return Object(v.a)(this,n),(u=t.call(this))._keyPath=e,u._columnName=r,u._from=a,u}return Object(y.a)(n,[{key:"from",value:function(e){return new n(this._keyPath,null,e)}},{key:"asJSON",value:function(){var e=[];return this._from?e.push("."+this._from+"."+this._keyPath):e.push("."+this._keyPath),e}},{key:"getColumnName",value:function(){if(!this._columnName){var e=this._keyPath.split(".");this._columnName=e[e.length-1]}return this._columnName}}]),n}(w),Se=function e(){Object(v.a)(this,e)};Se.id=new Ce("_id","id",null),Se.sequence=new Ce("_sequence","sequence",null),Se.deleted=new Ce("_deleted","deleted",null),Se.expiration=new Ce("_expiration","expiration",null);var Ne,De=function(e){Object(O.a)(n,e);var t=Object(j.a)(n);function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Object(v.a)(this,n),t.call(this,e,r,a)}return Object(y.a)(n,[{key:"remove",value:function(e){return delete this.doc[e],this}},{key:"_set",value:function(e,t){this.doc[e]=t}},{key:"setId",value:function(e){this.id=e}},{key:"setArray",value:function(e,t){return this._set(e,t),this}},{key:"setBlob",value:function(e,t){return this._set(e,{_type:"blob",data:t.toDictionary()}),this}},{key:"setBoolean",value:function(e,t){return this._set(e,t),this}},{key:"setData",value:function(e){return this.doc=e,this}},{key:"setDate",value:function(e,t){return this._set(e,t.toISOString()),this}},{key:"setDictionary",value:function(e,t){return this._set(e,t),this}},{key:"setDouble",value:function(e,t){return this._set(e,t),this}},{key:"setFloat",value:function(e,t){return this._set(e,t),this}},{key:"setInt",value:function(e,t){return this._set(e,t),this}},{key:"setLong",value:function(e,t){return this._set(e,t),this}},{key:"setNumber",value:function(e,t){return this._set(e,t),this}},{key:"setString",value:function(e,t){return this._set(e,t),this}},{key:"setValue",value:function(e,t){return this._set(e,t),this}}],[{key:"fromDocument",value:function(e){return new n(e.getId(),e.getSequence(),e.getData())}}]),n}(Y),Ie=function(){function e(){Object(v.a)(this,e)}return Object(y.a)(e,null,[{key:"property",value:function(e){return this.expression(w.property(e))}},{key:"expression",value:function(e){return new Re(e)}}]),e}(),Re=function(e){Object(O.a)(n,e);var t=Object(j.a)(n);function n(e){var r;return Object(v.a)(this,n),(r=t.call(this)).expression=e,r.isAscending=!0,r}return Object(y.a)(n,[{key:"ascending",value:function(){return this.isAscending=!0,this}},{key:"descending",value:function(){return this.isAscending=!1,this}},{key:"asJSON",value:function(){return this.isAscending?this.expression.asJSON():["DESC",this.expression.asJSON()]}}]),n}(Ie),Te=function(e){Object(O.a)(n,e);var t=Object(j.a)(n);function n(e,r){var a;return Object(v.a)(this,n),(a=t.call(this)).distinct=e,a.selectResults=r,a.setSelect(Object(se.a)(a)),a}return Object(y.a)(n,[{key:"from",value:function(e){return new ve(this,e)}},{key:"isDistinct",value:function(){return this.distinct}},{key:"getSelectResults",value:function(){return this.selectResults}},{key:"hasSelectResults",value:function(){return this.selectResults.length>0}},{key:"asJSON",value:function(){return this.selectResults.map((function(e){return e.asJSON()}))}}]),n}(ie),Le=function(){function e(){Object(v.a)(this,e)}return Object(y.a)(e,null,[{key:"select",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Te(!1,t)}},{key:"selectDistinct",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Te(!0,t)}}]),e}();function Ae(e){try{var t=e;return null!=t.activityLevel&&null!=t.progress&&null!=t.progress.completed&&null!=t.progress.total}catch(n){return console.warn("Invalid ReplicatorChange",n),!1}}var Ee="undefined"!=typeof crypto&&crypto.getRandomValues.bind(crypto);if(Ee){var Be=new Uint8Array(16);Ne=function(){return Ee(Be),Be}}else{var Pe=new Array(16);Ne=function(){for(var e,t=0;t<16;t++)0===(3&t)&&(e=4294967296*Math.random()),Pe[t]=e>>>((3&t)<<3)&255;return Pe}}for(var qe,Je=[],Ge=0;Ge<256;++Ge)Je[Ge]=(Ge+256).toString(16).substr(1);function Fe(e,t){var n=t||0,r=Je;return r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]+"-"+r[e[n++]]+r[e[n++]]+"-"+r[e[n++]]+r[e[n++]]+"-"+r[e[n++]]+r[e[n++]]+"-"+r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]}!function(e){e[e.STOPPED=0]="STOPPED",e[e.OFFLINE=1]="OFFLINE",e[e.CONNECTING=2]="CONNECTING",e[e.IDLE=3]="IDLE",e[e.BUSY=4]="BUSY"}(qe||(qe={}));var Ue=function(){function e(t){Object(v.a)(this,e),this.config=t,this.ActivityLevel=qe,this.replicatorId=null,this.changeListenerTokens=[],this.documentListenerTokens=[],this.didStartChangeListener=!1,this.didStartDocumentListener=!1,this.replicatorId=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var a=(e=e||{}).random||(e.rng||Ne)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t)for(var u=0;u<16;++u)t[r+u]=a[u];return t||Fe(a,null)}()}return Object(y.a)(e,[{key:"setId",value:function(e){this.replicatorId=e}},{key:"start",value:function(){var e=Object(p.a)(f.a.mark((function e(){var t,n,r=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.config.getDatabase(),null==this.replicatorId||!this.didStartChangeListener||!this.didStartDocumentListener){e.next=5;break}return e.next=4,t.getEngine().Replicator_Restart(this.replicatorId);case 4:return e.abrupt("return");case 5:return e.next=7,t.getEngine().Replicator_Create(t,this.config);case 7:return n=e.sent,this.replicatorId=n.replicatorId,this.didStartChangeListener||(t.getEngine().Replicator_AddChangeListener(this.replicatorId,(function(e,t){t?console.warn("Replicator ERROR ",t):Ae(e)?(r.status=new Ve(e.activityLevel,new Me(e.progress.completed,e.progress.total),null==e.error?null:new W(e.error.message,e.error.domain,e.error.code)),r.notifyChangeListeners(e)):console.warn("Invalid Replicator Change Object!")})),this.didStartChangeListener=!0),this.didStartDocumentListener||(t.getEngine().Replicator_AddDocumentListener(this.replicatorId,(function(e,t){t?console.warn("Replicator ERROR ",t):ue(e)?r.notifyDocumentListeners(e):console.warn("Invalid Document Replication Object!")})),this.didStartDocumentListener=!0),e.next=13,t.getEngine().Replicator_Start(this.replicatorId);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyChangeListeners",value:function(e){this.changeListenerTokens.forEach((function(t){return t(e)}))}},{key:"notifyDocumentListeners",value:function(e){var t=new ae(ne[e.direction],e.documents.map((function(e){var t=e.flags.map((function(e){return ee[e]})),n=null==e.error?null:new W(e.error.message,e.error.domain,e.error.code);return new re(e.id,t,n)})));this.documentListenerTokens.forEach((function(e){return e(t)}))}},{key:"cleanup",value:function(){var e=Object(p.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.changeListenerTokens=[],this.documentListenerTokens=[],t=this.config.getDatabase(),e.next=5,t.getEngine().Replicator_Cleanup(this.replicatorId);case 5:this.replicatorId=null;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"stop",value:function(){return this.config.getDatabase().getEngine().Replicator_Stop(this.replicatorId)}},{key:"resetCheckpoint",value:function(){return this.config.getDatabase().getEngine().Replicator_ResetCheckpoint(this.replicatorId)}},{key:"getStatus",value:function(){return this.config.getDatabase().getEngine().Replicator_GetStatus(this.replicatorId)}},{key:"addChangeListener",value:function(e){this.changeListenerTokens.push(e)}},{key:"removeChangeListener",value:function(e){this.changeListenerTokens=this.changeListenerTokens.filter((function(t){return t!==e}))}},{key:"addDocumentListener",value:function(e){this.documentListenerTokens.push(e)}},{key:"removeDocumentListener",value:function(e){this.documentListenerTokens=this.documentListenerTokens.filter((function(t){return t!==e}))}}]),e}(),Me=function(){function e(t,n){Object(v.a)(this,e),this.completed=t,this.total=n}return Object(y.a)(e,[{key:"getCompleted",value:function(){return this.completed}},{key:"getTotal",value:function(){return this.total}},{key:"toString",value:function(){return"Progress{completed=".concat(this.completed,", total=").concat(this.total,"}")}},{key:"copy",value:function(){return new e(this.completed,this.total)}}]),e}(),Ve=function(){function e(t,n,r){Object(v.a)(this,e),this.activityLevel=t,this.progress=n,this.error=r}return Object(y.a)(e,[{key:"getActivityLevel",value:function(){return this.activityLevel}},{key:"getProgress",value:function(){return this.progress}},{key:"getError",value:function(){return this.error}},{key:"toString",value:function(){return"Status{activityLevel=".concat(this.activityLevel,", progress=").concat(this.progress,", error=").concat(this.error,"}")}},{key:"copy",value:function(){return new e(this.activityLevel,this.progress,this.error)}}]),e}(),He=function(){function e(t){Object(v.a)(this,e),this.expression=t}return Object(y.a)(e,[{key:"getColumnName",value:function(){if(null!=this.alias)return this.alias;var e=this.expression;return e.getColumnName&&e.getColumnName()||null}},{key:"asJSON",value:function(){return this.expression.asJSON()}}],[{key:"property",value:function(e){return new We(x.property(e))}},{key:"expression",value:function(e){return new We(e)}},{key:"all",value:function(){var e=x.allFrom(null);return new ze(e)}}]),e}(),We=function(e){Object(O.a)(n,e);var t=Object(j.a)(n);function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return Object(v.a)(this,n),t.call(this,e)}return Object(y.a)(n,[{key:"as",value:function(e){return this.alias=e,this}}]),n}(He),ze=function(e){Object(O.a)(n,e);var t=Object(j.a)(n);function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return Object(v.a)(this,n),t.call(this,e)}return Object(y.a)(n,[{key:"from",value:function(e){return this.expression=x.allFrom(e),this.alias=e,this}}]),n}(He);(function(e){Object(O.a)(n,e);var t=Object(j.a)(n);function n(e){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.DEFAULT_SYNC_GATEWAY_SESSION_ID_NAME;return Object(v.a)(this,n),(r=t.call(this)).sessionID=e,r.cookieName=a,r}return Object(y.a)(n,[{key:"authenticate",value:function(e){var t=e[J.kC4ReplicatorOptionCookies]||"",n=t;t.length&&(n+="; "),n+="".concat(this.cookieName,"=").concat(this.sessionID),e[J.kC4ReplicatorOptionCookies]=n}},{key:"getSessionID",value:function(){return this.sessionID}},{key:"getCookieName",value:function(){return this.cookieName}},{key:"getType",value:function(){return"session"}},{key:"toJson",value:function(){return{cookieName:this.cookieName,sessionID:this.sessionID}}}]),n}(g)).DEFAULT_SYNC_GATEWAY_SESSION_ID_NAME="SyncGatewaySession";var Ke=function(){function e(t){Object(v.a)(this,e),this.url=t}return Object(y.a)(e,[{key:"toJson",value:function(){return{url:this.url}}}]),e}(),Qe=Object(d.a)("IonicCouchbaseLite"),Ye=n(8),Ze=new(function(){function e(){Object(v.a)(this,e),this.database=void 0,this.database2=void 0,this.doc=void 0,this.replicator=void 0,this.lastDocId=void 0,this.output=void 0,this._query1Results=void 0,this._queryTestResults=[],console.log("IONIC CBL ON READY");var t=new Q;t.setEncryptionKey("secret");var n=new te("thedb9",t);this.database=n,this.preInit()}return Object(y.a)(e,[{key:"openDocRepl",value:function(){}},{key:"out",value:function(e){this.output=e}},{key:"preInit",value:function(){var e=Object(p.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.database.open();case 2:console.log("Databases opened!"),this.database.addChangeListener((function(e){console.log("DATABASE CHANGE",e,e.documentIDs)}));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"init",value:function(){var e=Object(p.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.openDbs();case 2:this.out("Opened db");case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"openDbs",value:function(){var e=Object(p.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.database.open();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"exists",value:function(){var e=Object(p.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.database.exists("test","test");case 2:t=e.sent,console.log("Does it exist?",t),this.out("Exists? ".concat(t));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"queryTest",value:function(){var e=Object(p.a)(f.a.mark((function e(){var t,n,r,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.database){e.next=2;break}return e.abrupt("return");case 2:n=this.database,Le.select(He.expression(Se.id),He.property("name"),He.property("type")).from(z.database(n)).where(w.property("type").equalTo(w.string("hotel"))).orderBy(Ie.expression(Se.id)),Le.select(He.all()).from(z.database(n)).where(w.property("type").equalTo(w.string("SDK"))),r=Le.select(He.all()).from(z.database(n)).where(w.property("type").equalTo(w.string("hotel"))).limit(w.intValue(10)),console.log("Query 3 to json",r.toJson()),Le.select(He.expression(Se.id),He.property("name"),He.property("public_likes")).from(z.database(n)).where(w.property("type").equalTo(w.string("hotel")).and(P.contains(w.property("public_likes"),w.string("Armani Langworth")))),a=[w.property("first"),w.property("last"),w.property("username")],Le.select(He.all()).from(z.database(n)).where((t=w.string("Armani")).in.apply(t,a)),Le.select(He.expression(Se.id),He.property("country"),He.property("name")).from(z.database(n)).where(w.property("type").equalTo(w.string("landmark")).and(w.property("name").like(w.string("Royal Engineers Museum")))),Le.select(He.expression(Se.id),He.property("country"),He.property("name")).from(z.database(n)).where(w.property("type").equalTo(w.string("landmark")).and(w.property("name").like(w.string("Eng%e%")))),Le.select(He.expression(Se.id),He.property("country"),He.property("name")).from(z.database(n)).where(w.property("type").equalTo(w.string("landmark")).and(w.property("name").like(w.string("Eng____r")))),Le.select(He.expression(Se.id),He.property("country"),He.property("name")).from(z.database(n)).where(w.property("type").equalTo(w.string("landmark")).and(w.property("name").regex(w.string("\\bEng.*r\\b")))),Le.select(He.expression(w.property("name").from("airline")),He.expression(w.property("callsign").from("airline")),He.expression(w.property("destinationairport").from("route")),He.expression(w.property("stops").from("route")),He.expression(w.property("airline").from("route"))).from(z.database(n).as("airline")).join(xe.join(z.database(n).as("route")).on(Se.id.from("airline").equalTo(w.property("airlineid").from("route")))).where(w.property("type").from("route").equalTo(w.string("route")).and(w.property("type").from("airline").equalTo(w.string("airline"))).and(w.property("sourceairport").from("route").equalTo(w.string("RIX")))),Le.select(He.expression(ye.count(w.string("*"))),He.property("country"),He.property("tz")).from(z.database(n)).where(w.property("type").equalTo(w.string("airport")).and(w.property("geo.alt").greaterThanOrEqualTo(w.intValue(300)))).groupBy(w.property("country"),w.property("tz")).orderBy(Ie.expression(ye.count(w.string("*"))).descending()),Le.select(He.expression(Se.id),He.property("name")).from(z.database(n)).where(w.property("type").equalTo(w.string("hotel"))).orderBy(Ie.property("name").ascending()).limit(w.intValue(10));case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"close",value:function(){var e=Object(p.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.database&&this.database.close(),this.out("Closed db");case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"compact",value:function(){var e=Object(p.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.database&&this.database.compact(),this.out("Compacted db");case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Object(p.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.database){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.database.deleteDatabase();case 4:this.out("Deleted db");case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createIndex",value:function(){var e=Object(p.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.database){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.database.createIndex("TypeNameIndex",we.valueIndex(je.property("type"),je.property("name")));case 4:return(t=we.fullTextIndex(ke.property("name"))).setIgnoreAccents(!1),e.next=8,this.database.createIndex("nameFTSIndex",t);case 8:this.out("Created indexes");case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"deleteIndex",value:function(){var e=Object(p.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.database){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.database.deleteIndex("TypeNameIndex");case 4:this.out("Deleted index");case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getIndexes",value:function(){var e=Object(p.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.database){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.database.getIndexes();case 4:t=e.sent,this.out("Got indexes: ".concat(t));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"save",value:function(){var e=Object(p.a)(f.a.mark((function e(){var t,n,r,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(new De).setString("name","Escape").setString("type","hotel").setString("asdf",null).setArray("items",["hello",{really:"cool"},123,!0]).setArray("someWithNull",[1,null,4]).setDictionary("config",{size:"large",isCool:!1}).setDate("created",new Date),n=(new De).setString("name","Space").setString("type","house").setDate("created",new Date),r=(new De).setString("name","Ice Cream").setString("type","parlour").setDate("created",new Date),a=(new De).setString("name","Sleep").setString("type","hotel").setDate("created",new Date),e.next=6,this.database.save(t,G.FAIL_ON_CONFLICT);case 6:return e.next=8,this.database.save(n);case 8:return e.next=10,this.database.save(r);case 10:return e.next=12,this.database.save(a);case 12:this.lastDocId=t.getId(),console.log("Saved document, id is",t.getId()),this.out("Saved document. Last id ".concat(t.getId())),this.doc=t;case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"saveMany",value:function(){var e=Object(p.a)(f.a.mark((function e(){var t,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=0;t<1e4;t++)n=(new De).setString("name","Saved Doc").setString("type","hotel").setString("asdf",null).setArray("items",["hello",{really:"cool"},123,!0]).setArray("someWithNull",[1,null,4]).setDictionary("config",{size:"large",isCool:!1}).setDate("created",new Date),this.database.save(n);this.out("Saved many");case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getPath",value:function(){var e=Object(p.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.database){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.database.getPath();case 4:t=e.sent,this.out("DB path: ".concat(t)),console.log("DB path: ".concat(t));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getCount",value:function(){var e=Object(p.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.database){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.database.getCount();case 4:t=e.sent,this.out("Doc count: ".concat(t)),console.log("Doc count: ".concat(t));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"update",value:function(){var e=Object(p.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.doc){e.next=2;break}return e.abrupt("return");case 2:return this.doc.setBoolean("isAwesome",!0),e.next=5,this.database.save(this.doc);case 5:this.out("Updated document. id ".concat(this.doc.getId())),console.log("Updated document. Id is",this.doc.getId());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getDocument",value:function(){var e=Object(p.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.lastDocId){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.database.getDocument(this.lastDocId);case 4:t=e.sent,console.log("Got document",t),this.out("Got document: ".concat(JSON.stringify(t.toDictionary())));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"deleteDocument",value:function(){var e=Object(p.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.lastDocId){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.database.getDocument(this.lastDocId);case 4:return t=e.sent,console.log("Deleteing document",t),e.next=8,this.database.deleteDocument(t);case 8:this.out("Deleted document ".concat(t.getId()));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"purgeDocument",value:function(){var e=Object(p.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.lastDocId){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.database.getDocument(this.lastDocId);case 4:return t=e.sent,console.log("Got document",t),e.next=8,this.database.purgeDocument(t);case 8:this.out("Purged document ".concat(t.getId()));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"query1",value:function(){var e=Object(p.a)(f.a.mark((function e(){var t,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Building query 1"),t=Le.select(He.all(),He.property("name"),He.expression(Se.id)).from(z.database(this.database)).where(w.property("type").equalTo(w.string("hotel"))).orderBy(Ie.expression(Se.id)),e.next=4,t.execute();case 4:n=e.sent,this._query1Results=n,console.log("Executed query",n),this.out("Executed query");case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ftsQuery",value:function(){var e=Object(p.a)(f.a.mark((function e(){var t,n,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Building fts query 1"),t=de.index("nameFTSIndex").match("ice"),n=Le.select(He.all()).from(z.database(this.database)).where(t),e.next=5,n.execute();case 5:r=e.sent,this._query1Results=r,console.log("Executed fts query",r),this.out("Executed fts query");case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"next1",value:function(){var e=Object(p.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._query1Results){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this._query1Results.next();case 4:t=e.sent,console.log("Moved next",t),this.out("Next result: ".concat(JSON.stringify(t)));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"nextBatch",value:function(){var e=Object(p.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._query1Results){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this._query1Results.nextBatch();case 4:t=e.sent,console.log("Moved next batch",t),this.out("Next batch: ".concat(t.length));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"all1",value:function(){var e=Object(p.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._query1Results){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this._query1Results.allResults();case 4:t=e.sent,console.log("All results",t),this.out("All results: ".concat(JSON.stringify(t)));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"queryDeleted",value:function(){var e=Object(p.a)(f.a.mark((function e(){var t,n,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Building query deleted"),t=Le.select(He.all(),He.property("name"),He.expression(Se.id)).from(z.database(this.database)).where(Se.deleted),e.next=4,t.execute();case 4:return n=e.sent,this._query1Results=n,e.next=8,n.allResults();case 8:r=e.sent,console.log("Executed delete query",n),console.log(r),this.out("Executed deleted query");case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"query2",value:function(){var e=Object(p.a)(f.a.mark((function e(){var t,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Building query 2"),t=Le.select(He.all(),He.property("name"),He.expression(Se.id)).from(z.database(this.database)).where(w.property("name").equalTo(w.string("Saved Doc"))).orderBy(Ie.expression(Se.id)),e.next=4,t.execute();case 4:n=e.sent,this._query1Results=n,console.log("Executed query",n),this.out("Executed query");case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"all2",value:function(){var e=Object(p.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._query1Results){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this._query1Results.allResults();case 4:t=e.sent,console.log("All results",t.length),this.out("All results: ".concat(t.length));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"allBatched",value:function(){var e=Object(p.a)(f.a.mark((function e(){var t,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._query1Results){e.next=2;break}return e.abrupt("return");case 2:t=0;case 3:return e.next=5,this._query1Results.nextBatch();case 5:if(!(n=e.sent).length){e.next=10;break}console.log("Loaded ",n.length),t+=n.length,e.next=3;break;case 10:console.log(n&&n.length),console.log("All results",t),this.out("All results: ".concat(t));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"foreach1",value:function(){var e=Object(p.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._query1Results){e.next=2;break}return e.abrupt("return");case 2:console.log("For each"),this._query1Results.forEach((function(e){console.log("FOR",e)})),this.out("For query");case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"queryCreateTest",value:function(){var e=Object(p.a)(f.a.mark((function e(){var t,n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=0;t<1e4;t++)Le.select(He.all(),He.property("name"),He.expression(Se.id)).from(z.database(this.database)).where(w.property("type").equalTo(w.string("hotel"))).orderBy(Ie.expression(Se.id)).execute().then((function(e){return n._queryTestResults.push(e)}));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"queryCreateTestCleanup",value:function(){var e=Object(p.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._queryTestResults.forEach((function(e){e.cleanup()})),this._queryTestResults=[];case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"rsCleanup",value:function(){var e=Object(p.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._query1Results){e.next=2;break}return e.abrupt("return");case 2:this._query1Results.cleanup();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"documentIdTest",value:function(){var e=Object(p.a)(f.a.mark((function e(){var t,n,r,a,u,i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(new De).setString("id","SuperId2").setString("_id","SuperId"),e.next=3,this.database.save(t);case 3:return n=t.getId(),console.log("Got doc id",n),e.next=7,this.database.getDocument(n);case 7:return r=e.sent,console.log("Found doc",r),console.log(r.getId()),a=Le.select(He.expression(Se.id),He.property("id")).from(z.database(this.database)).where(w.property("id").equalTo(w.string("SuperId2"))),e.next=13,a.execute();case 13:return u=e.sent,e.next=16,u.allResults();case 16:i=e.sent,console.log("Got all results",i);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"replicatorStart",value:function(){var e=Object(p.a)(f.a.mark((function e(){var t,n,r,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.database){e.next=2;break}return e.abrupt("return");case 2:if(!this.replicator){e.next=7;break}return e.next=5,this.replicator.start();case 5:return this.out("Replicator start"),e.abrupt("return");case 7:return t=this.database,n=new Ke("ws://localhost:4984/thedb5"),(r=new J(t,n)).setReplicatorType(J.ReplicatorType.PUSH_AND_PULL),r.setContinuous(!0),r.setAuthenticator(new M("sync_gateway","testtest")),(a=new Ue(r)).addChangeListener((function(e){console.log("Replicator change!",JSON.stringify(e)),e.error&&console.log("Error:: ",JSON.stringify(e.error))})),e.next=17,a.start();case 17:this.replicator=a,this.out("Replicator start");case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"replicatorStop",value:function(){var e=Object(p.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.replicator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.replicator.stop();case 4:this.out("Replicator stop");case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"replicatorResetCheckpoint",value:function(){var e=Object(p.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.replicator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.replicator.resetCheckpoint();case 4:this.out("Replicator reset checkpoint");case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"replicatorGetStatus",value:function(){var e=Object(p.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.replicator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.replicator.getStatus();case 4:t=e.sent,this.out("Replicator getStatus: ".concat(JSON.stringify(t)));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toggleLogLevel",value:function(){var e=Object(p.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.database.setLogLevel(F.ALL,U.VERBOSE);case 2:this.out("Log level toggled");case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setFileConfig",value:function(){var e=Object(p.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"replicatorTest",value:function(){var e=Object(p.a)(f.a.mark((function e(){var t,n,r,a,u,i=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.database,n=new Ke("ws://localhost:4984/example_sg_db"),(r=new J(t,n)).setReplicatorType(J.ReplicatorType.PUSH_AND_PULL),a=new Ue(r),u=function(e){console.log("Replicator change in here!",e),null!=e.error&&console.log("Error code ::  "+e.error)},a.addChangeListener(u),e.next=9,a.start();case 9:this.replicator=a,this.out("Replicator start"),setTimeout((function(){i.out("Replicator removed"),a.removeChangeListener(u),setTimeout((function(){i.out("Replicator added again"),a.addChangeListener(u)}),2e3)}),1e4);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"wait",value:function(e){return new Promise((function(t){setTimeout((function(){t()}),e)}))}},{key:"replicatorTest2",value:function(){var e=Object(p.a)(f.a.mark((function e(){var t,n,r,a,u,i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.database,n=new Ke("ws://localhost:4984/example_sg_db"),(r=new J(t,n)).setReplicatorType(J.ReplicatorType.PUSH_AND_PULL),a=1,r.setAuthenticator(new M("john","pass")),u=new Ue(r),i=function(e){console.log("Replicator change for!",a,e),null!=e.error&&console.log("Error code ::  "+e.error)},u.addChangeListener(i),e.next=11,u.start();case 11:return e.next=13,this.wait(2e3);case 13:return e.next=15,u.stop();case 15:return e.next=17,u.cleanup();case 17:return e.next=19,this.wait(5e3);case 19:return u.removeChangeListener(i),e.next=22,this.delete();case 22:return e.next=24,this.database.open();case 24:return u=new Ue(r),a=2,u.addChangeListener((function(e){console.log("Replicator change 222222 for!",a,e),null!=e.error&&console.log("Error code ::  "+e.error)})),e.next=29,u.start();case 29:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"base64ToArrayBuffer",value:function(e){for(var t=window.atob(e),n=t.length,r=new Uint8Array(n),a=0;a<n;a++)r[a]=t.charCodeAt(a);return r.buffer}},{key:"arrayBufferToBase64",value:function(e){for(var t="",n=new Uint8Array(e),r=n.byteLength,a=0;a<r;a++)t+=String.fromCharCode(n[a]);return window.btoa(t)}},{key:"blobTest",value:function(){var e=Object(p.a)(f.a.mark((function e(){var t,n,r,a,u,i,s,o,c,l,h;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(new De).setString("name","Thing").setBlob("profile",new V("image/jpeg",this.base64ToArrayBuffer("iVBORw0KGgoAAAANSUhEUgAAAH4AAAAsCAMAAACUu/xGAAAAq1BMVEUAAABlZVJlZVKsrJthYU+zs6Grq5ylpZazs6FlZVJfX01lZVJlZVKsrJurq5urq5xlZVKtrZ1lZVJlZVKvr52zs6GysqCoqJeqqpmzs6Grq5xlZVJgYE6zs6Gnp5mrq5yiopRjY1CRkX2rq5yzs6FlZVKRkX2goJKKineRkX2Pj3yrq5yIiHWRkX2RkX2RkX1lZVKRkX2rq5yzs6GoqJdfX02goJKHh3SHh3VrpzVsAAAAMHRSTlMAQIDHx3+Ax0Ag7qBgIA9AEFCPMLOgMO7bYKBQ24+zYNuzkY9wcAXu0oiocPFBMHYlVbK0AAAD3UlEQVRYw6SW7Y6qMBCGB0IkLfKdnB9ocFmjru7HERL03P+VnXY6bdmWjcF9f2inxjydvjMDcHy99zP693oEpTpQYjBR7W4VmzA81GoZCDn/ycrValVmYOJcKBWL1/4HnUEpupLGxOI47iQmDkfc4GEBEFyNQkClzYDKQQs3VmJBufu6G7zRWNMeUzEHUnLVWs/gy9vg4NNB4wUIPOG2h7e8NcV0HRt7QPDxfzTd4ptleB5F6ro3NtsIc7UnjMKKXyuN30ZS+PuLRMW7PN+l2vlhAZ6yqCZmcrm05stfOrwVpvEBaJWStIOpVk/gC8Rb62tjRj25Fx/fEsgqE27cluKB8GR9hDFzeX44CFbmJb9/Cn8w1ldA5tO9VD/gc8FpveTbxfi1LXWOl10Z80c0Yx7/jpyyjRtd9zuxU8ZL8FEYJjZFpg6yIfOpKsf1FJ+EUkzddKkabQ+o0zCcwMN/vZm+uLh4UmW7nptTCBVq5nUF4Y0CgBaNVip18jsPn370909cfX708/gusF3fkQfrKZHXHh45Wi8meRefvfVCfwGOZ9zx8TZ9TjWY2M6vVf4jm8e3WYrDJ1Vj4N3FHwVd6vKFCxefBMFmq7ub6UI7TMZw0SEv8ryPDVaoxPiWufhL/02zY0cm3ZH1VgxIIYa1U/nIibH/EZjjp4M/9w/x9FijbyuqdzOVH+BbWQJxHMupd4pjINhDPKVH1lslBl9g6OKb73j0wmoBHrMj691nsJ0QLn4l0/09nrIm6wv7nGdQqwjGucvPJSWjN4z8aXyBlkfK+i2gmDI/HENGjXA9uPhsUJ22p2OQFg3daaFx0/9qnWBRbOl9hHlvOw3OW/xs4Hf4rcnYzj+OeFOIHj4dtG7/2y+b3IhBGAqjUiQWQ9JI/ErDpop6gcei9z9ZIXHIhLaLSGRW8zYxIuaTZccxqsGfHDXvH4cf37Z4e3ihxVOTp5bf4E8N2u+3PWB2SP7tXsfsFl80rtOeZX/gvz6//7tmnFFzD2mkxnFgL710ToHH1eCcm/LU2aA9m027v+kBH8ipyHbACxAMWaV5I4v2ZgAzIxkUGXIqkn3xrhw4wVe8hoMmOwBmYJMiJy+lHPriNcSyrvgEgUS2h/vl1BcvSqgcZsPbbABrhgdgvhgvS6hIYsPP8MwTVR5SLZA4573xHMpCV7xGZBFmxyProfR64yNCgKh4hygjXIuvpdcbPyEayA2vsEpRHcgl6gtzr8A9ho0RlgQnBPoK4tV45gBfGQZ6KQBDqzRcjdeAqQwHUfYp+SohcQdc1/Ukm4Gw4dV6vqTkM+uQpRv8E2VPF/sPp9xSb2qlGH4AAAAASUVORK5CYII="))),e.next=3,this.database.save(t);case 3:return console.log("Saved doc",t),n=Le.select(He.all(),He.property("name"),He.expression(Se.id)).from(z.database(this.database)).where(w.property("name").equalTo(w.string("Thing"))),e.next=7,n.execute();case 7:return r=e.sent,e.next=10,r.allResults();case 10:return a=e.sent,console.log("Got all results",a),e.next=14,this.database.getDocument(t.getId());case 14:return u=e.sent,i=t.getBlob("profile"),e.next=18,t.getBlobContent("profile",this.database);case 18:return s=e.sent,console.log("Got blob",i),console.log("Got blob content",s),o=this.arrayBufferToBase64(s),console.log("Blob content to b64",o),c=u.getBlob("profile"),e.next=26,u.getBlobContent("profile",this.database);case 26:l=e.sent,console.log("Got new doc",u),console.log("Got new blob",c),h=this.arrayBufferToBase64(l),console.log("Got new blob content",h),console.log(h);case 32:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}()),Xe=function(){var e=Object(a.useRef)(null),t=Object(a.useRef)(Ze);return Object(Ye.jsxs)(c.e,{children:[Object(Ye.jsx)(c.d,{children:Object(Ye.jsx)(c.i,{children:Object(Ye.jsx)(c.h,{children:"Blank"})})}),Object(Ye.jsxs)(c.c,{fullscreen:!0,children:[Object(Ye.jsx)(c.d,{collapse:"condense",children:Object(Ye.jsx)(c.i,{children:Object(Ye.jsx)(c.h,{size:"large",children:"Blank"})})}),Object(Ye.jsx)("div",{id:"output",ref:e}),Object(Ye.jsx)(c.b,{onClick:function(){return t.current.toggleLogLevel()},children:"Toggle Log Level"}),Object(Ye.jsx)(c.b,{onClick:function(){return t.current.setFileConfig()},children:"Set File Logging Config"}),Object(Ye.jsx)(c.b,{onClick:function(){return t.current.init()},children:"Open DB"}),Object(Ye.jsx)(c.b,{onClick:function(){return t.current.close()},children:"Close DB"}),Object(Ye.jsx)("hr",{}),Object(Ye.jsx)(c.b,{onClick:function(){return t.current.exists()},children:"DB Exists"}),Object(Ye.jsx)(c.b,{onClick:function(){return t.current.queryTest()},children:"Query Test"}),Object(Ye.jsx)(c.b,{onClick:function(){return t.current.delete()},children:"Delete DB"}),Object(Ye.jsx)(c.b,{onClick:function(){return t.current.compact()},children:"Compact DB"}),Object(Ye.jsx)(c.b,{onClick:function(){return t.current.getPath()},children:"Get DB Path"}),Object(Ye.jsx)(c.b,{onClick:function(){return t.current.delete()},children:"Delete DB"}),Object(Ye.jsx)("hr",{}),Object(Ye.jsx)(c.b,{onClick:function(){return t.current.createIndex()},children:"Create Index"}),Object(Ye.jsx)(c.b,{onClick:function(){return t.current.deleteIndex()},children:"Delete Index"}),Object(Ye.jsx)(c.b,{onClick:function(){return t.current.getIndexes()},children:"Get Indexes"}),Object(Ye.jsx)("hr",{}),Object(Ye.jsx)(c.b,{onClick:function(){return t.current.save()},children:"Save Document"}),Object(Ye.jsx)(c.b,{onClick:function(){return t.current.saveMany()},children:"Save Many"}),Object(Ye.jsx)(c.b,{onClick:function(){return t.current.getCount()},children:"Get Count"}),Object(Ye.jsx)(c.b,{onClick:function(){return t.current.update()},children:"Update Document"}),Object(Ye.jsx)(c.b,{onClick:function(){return t.current.getDocument()},children:"Get Document"}),Object(Ye.jsx)(c.b,{onClick:function(){return t.current.deleteDocument()},children:"Delete Document"}),Object(Ye.jsx)(c.b,{onClick:function(){return t.current.purgeDocument()},children:"Purge Document"}),Object(Ye.jsx)("hr",{}),Object(Ye.jsx)(c.b,{onClick:function(){return t.current.blobTest()},children:"Blob Test"}),Object(Ye.jsx)("hr",{}),Object(Ye.jsx)(c.b,{onClick:function(){return t.current.query1()},children:"Query 1"}),Object(Ye.jsx)(c.b,{onClick:function(){return t.current.ftsQuery()},children:"FTS Query"}),Object(Ye.jsx)(c.b,{onClick:function(){return t.current.next1()},children:"Next Result 1"}),Object(Ye.jsx)(c.b,{onClick:function(){return t.current.nextBatch()},children:"Next Result Batch 1"}),Object(Ye.jsx)(c.b,{onClick:function(){return t.current.all1()},children:"All Results 1"}),Object(Ye.jsx)("hr",{}),Object(Ye.jsx)(c.b,{onClick:function(){return t.current.queryDeleted()},children:"Query Deleted"}),Object(Ye.jsx)("hr",{}),Object(Ye.jsx)(c.b,{onClick:function(){return t.current.query2()},children:"Query many"}),Object(Ye.jsx)(c.b,{onClick:function(){return t.current.all2()},children:"All Results many"}),Object(Ye.jsx)(c.b,{onClick:function(){return t.current.allBatched()},children:"All Results many batched"}),Object(Ye.jsx)(c.b,{onClick:function(){return t.current.foreach1()},children:"For Each 1"}),Object(Ye.jsx)("hr",{}),Object(Ye.jsx)(c.b,{onClick:function(){return t.current.queryCreateTest()},children:"Query Memory Test"}),Object(Ye.jsx)(c.b,{onClick:function(){return t.current.queryCreateTestCleanup()},children:"Query Memory Test Cleanup"}),Object(Ye.jsx)(c.b,{onClick:function(){return t.current.documentIdTest()},children:"Document ID Test"}),Object(Ye.jsx)("hr",{}),Object(Ye.jsx)(c.b,{onClick:function(){return t.current.replicatorStart()},children:"Replicator Start"}),Object(Ye.jsx)(c.b,{onClick:function(){return t.current.replicatorStop()},children:"Replicator Stop"}),Object(Ye.jsx)(c.b,{onClick:function(){return t.current.replicatorResetCheckpoint()},children:"Replicator Reset Checkpoint"}),Object(Ye.jsx)(c.b,{onClick:function(){return t.current.replicatorGetStatus()},children:"Replicator Get Status"}),Object(Ye.jsx)(c.b,{onClick:function(){return t.current.replicatorTest()},children:"Replicator Test"}),Object(Ye.jsx)(c.b,{onClick:function(){return t.current.replicatorTest2()},children:"Replicator Test 2"})]})]})},$e=(n(74),n(75),n(76),n(77),n(78),n(79),n(80),n(81),n(82),n(83),n(84),function(){return Object(Ye.jsx)(c.a,{children:Object(Ye.jsx)(l.a,{children:Object(Ye.jsxs)(c.g,{children:[Object(Ye.jsx)(o.b,{exact:!0,path:"/home",children:Object(Ye.jsx)(Xe,{})}),Object(Ye.jsx)(o.b,{exact:!0,path:"/",children:Object(Ye.jsx)(o.a,{to:"/home"})})]})})})});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var et=function(e){e&&e instanceof Function&&n.e(58).then(n.bind(null,147)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,u=t.getLCP,i=t.getTTFB;n(e),r(e),a(e),u(e),i(e)}))};s.a.render(Object(Ye.jsx)(u.a.StrictMode,{children:Object(Ye.jsx)($e,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)})),et()}},[[85,3,4]]]);
//# sourceMappingURL=main.b41734b8.chunk.js.map